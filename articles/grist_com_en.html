<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>docs.getgrist.com (EN) • gristapi</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="docs.getgrist.com (EN)">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gristapi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/grist_com_en.html">docs.getgrist.com (EN)</a>
    </li>
    <li>
      <a href="../articles/grist_gouv_fr.html">grist.numerique.gouv.fr (FR)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/spyrales/gristapi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>docs.getgrist.com (EN)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/spyrales/gristapi/blob/main/vignettes/grist_com_en.Rmd" class="external-link"><code>vignettes/grist_com_en.Rmd</code></a></small>
      <div class="hidden name"><code>grist_com_en.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="using-gristapi">Using <code>gristapi</code><a class="anchor" aria-label="anchor" href="#using-gristapi"></a>
</h2>
<div class="section level3">
<h3 id="recover-your-api-key">Recover your API key<a class="anchor" aria-label="anchor" href="#recover-your-api-key"></a>
</h3>
<p>Any user logged in to <a href="https://docs.getgrist.com" class="external-link uri">https://docs.getgrist.com</a> has an API key that allows
them to read/write to documents they have permissions to (see <a href="https://support.getgrist.com/" class="external-link uri">https://support.getgrist.com/</a>).</p>
<p>To retrieve this key, go to “Profile Settings” from your profile
icon.</p>
<p><img src="../reference/figures/para_account.png" style="width: 40%;"></p>
<p>Then at the bottom of the page you can copy your API key.</p>
<p><img src="../reference/figures/key_api.png" style="width: 80%;"></p>
<p>It is recommended to set this key as an environment variable, so that
it does not appear in your R scripts. In our examples, this key will be
injected by <code>Sys.getenv("GETGRIST_KEY")</code>.</p>
</div>
<div class="section level3">
<h3 id="retrieve-the-api-id-of-a-document">Retrieve the API ID of a document<a class="anchor" aria-label="anchor" href="#retrieve-the-api-id-of-a-document"></a>
</h3>
<p>To obtain the identifier, you must first locate yourself on this
document in the Grist interface, then in the same way as before, go to
“Document settings” from the icon of your profile.</p>
<p><img src="../reference/figures/para_docen.png" style="width: 40%;"></p>
<p>Puis dans la partie “API” de la page, vous pouvez copiez
l’identifiant du document.</p>
<p><img src="../reference/figures/doc_iden.png" style="width: 80%;"></p>
<p>It is also recommended to put this identifier in an environment
variable, in our examples, this identifier will be injected by
<code>Sys.getenv("GETGRIST_DOC_TEST")</code>.</p>
</div>
<div class="section level3">
<h3 id="initialize-the-connection">Initialize the connection<a class="anchor" aria-label="anchor" href="#initialize-the-connection"></a>
</h3>
<p>The first thing to do to use gristapi is to initialize the connection
to the Grist API of the document (which can contain several sheets or
tables).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/spyrales/gristapi" class="external-link">gristapi</a></span><span class="op">)</span></span>
<span><span class="va">api</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/grist_api.html">grist_api</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  server <span class="op">=</span> <span class="st">'https://docs.getgrist.com'</span>,</span>
<span>  api_key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GETGRIST_KEY"</span><span class="op">)</span>,</span>
<span>  doc_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GETGRIST_DOC_TEST"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If no error message appears, the connection to your API was
successful and the <code>api</code> object can now be used to process
the data and sheets of your document from R.</p>
<p>The details of your connection information (document metadata) are
displayed in the console, simply by displaying the object:</p>
<pre><code><span><span class="va">api</span></span>
<span></span>
<span><span class="co">#&gt; [1] "-----------------"</span></span>
<span><span class="co">#&gt; [1] "grist_api print"</span></span>
<span><span class="co">#&gt; [1] "-----------------"</span></span>
<span><span class="co">#&gt; [1] "&lt;Document info&gt;"</span></span>
<span><span class="co">#&gt; $name</span></span>
<span><span class="co">#&gt; [1] "Test Grist getgrist.com"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $createdAt</span></span>
<span><span class="co">#&gt; [1] "2025-07-21T08:37:26.704Z"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $updatedAt</span></span>
<span><span class="co">#&gt; [1] "2025-07-22T14:14:11.188Z"</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="va">...</span></span></code></pre>
<p>The main methods of the object thus created are <a href="../reference/grist_api.html#method-grist_api-call"><code>call()</code></a>,
<a href="../reference/grist_api.html#method-grist_api-table_to_json"><code>table_to_json()</code></a>,
<a href="../reference/grist_api.html#method-grist_api-json_to_table"><code>json_to_table()</code></a>.</p>
</div>
<div class="section level3">
<h3 id="create-a-table">Create a table<a class="anchor" aria-label="anchor" href="#create-a-table"></a>
</h3>
<p>To create a table, use the <code>add_records</code> function with the
<code>create_or_replace=TRUE</code> option. The table is assigned an
identifier without spaces or special characters (<code>table_id</code>)
and given a <code>data.frame</code> to inject
(<code>record_dicts</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/add_records.html">add_records</a></span><span class="op">(</span><span class="va">api</span>,</span>
<span>  table_id <span class="op">=</span> <span class="st">"iris"</span>,</span>
<span>  record_dicts <span class="op">=</span> <span class="va">iris</span>,</span>
<span>  create_or_replace <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18</span></span>
<span><span class="co">##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36</span></span>
<span><span class="co">##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54</span></span>
<span><span class="co">##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72</span></span>
<span><span class="co">##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90</span></span>
<span><span class="co">##  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108</span></span>
<span><span class="co">## [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126</span></span>
<span><span class="co">## [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144</span></span>
<span><span class="co">## [145] 145 146 147 148 149 150</span></span></code></pre>
<p>This function returns the vector of ids (integers) created in the
table.</p>
<p>Please note that all tables (or sheets) created in Grist are assigned
an identifier beginning with a capital letter! Similarly, if your column
names contain “.”, they will be automatically replaced with “_“.</p>
<p>It is therefore recommended to use the <code><a href="../reference/listtables.html">listtables()</a></code> and
<code><a href="../reference/listcolumns.html">listcolumns()</a></code> functions after creating a table to ensure
that the naming of the structure will not affect your subsequent
processing.</p>
</div>
<div class="section level3">
<h3 id="explore-the-data-in-a-table">Explore the data in a table<a class="anchor" aria-label="anchor" href="#explore-the-data-in-a-table"></a>
</h3>
<p>To import data from a table into R, use the <code>fetch_table</code>
function. If the <code>filters</code> option is not present, all data
from the table is retrieved.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">giris</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/fetch_table.html">fetch_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">giris</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">##      id Sepal_Length Sepal_Width Petal_Length Petal_Width Species</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1          5.1         3.5          1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2          4.9         3            1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3          4.7         3.2          1.3         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     4          4.6         3.1          1.5         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>     5          5           3.6          1.4         0.2 setosa </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>     6          5.4         3.9          1.7         0.4 setosa</span></span></code></pre>
<p>If you want to filter before importing the data (useful for large
tables), you must provide a filter written as indicated in the <a href="https://support.getgrist.com/api/#tag/records/operation/listRecords" class="external-link">Grist
documentation</a></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gvirginica</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch_table.html">fetch_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, filters <span class="op">=</span> <span class="st">'filter={"Species": ["virginica"]}'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">gvirginica</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">##      id Sepal_Length Sepal_Width Petal_Length Petal_Width Species  </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   101          6.3         3.3          6           2.5 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>   102          5.8         2.7          5.1         1.9 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>   103          7.1         3            5.9         2.1 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>   104          6.3         2.9          5.6         1.8 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>   105          6.5         3            5.8         2.2 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>   106          7.6         3            6.6         2.1 virginica</span></span></code></pre>
<p>It is also possible to sort the data and limit the number of
rows.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gbigpetal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch_table.html">fetch_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, filters <span class="op">=</span> <span class="st">'sort=-Petal_Width&amp;limit=10'</span><span class="op">)</span></span>
<span><span class="va">gbigpetal</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 6</span></span></span>
<span><span class="co">##       id Sepal_Length Sepal_Width Petal_Length Petal_Width Species  </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>   101          6.3         3.3          6           2.5 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>   110          7.2         3.6          6.1         2.5 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>   145          6.7         3.3          5.7         2.5 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>   115          5.8         2.8          5.1         2.4 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   137          6.3         3.4          5.6         2.4 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   141          6.7         3.1          5.6         2.4 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   116          6.4         3.2          5.3         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   119          7.7         2.6          6.9         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>   121          6.9         3.2          5.7         2.3 virginica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>   136          7.7         3            6.1         2.3 virginica</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="add-edit-and-delete-rows">Add, edit and delete rows<a class="anchor" aria-label="anchor" href="#add-edit-and-delete-rows"></a>
</h3>
<p>To <strong>add rows</strong> to a table, we use the
<code>add_records</code> function again. The submitted data.frame must
not contain a column named <code>id</code> and its structure must be
identical to that of the destination table.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Sepal_Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6.5</span>,<span class="fl">6.2</span><span class="op">)</span>, </span>
<span>  Sepal_Width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.9</span>,<span class="fl">3.3</span><span class="op">)</span>, </span>
<span>  Petal_Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.5</span>,<span class="fl">3.1</span><span class="op">)</span>, </span>
<span>  Petal_Width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7.4</span>,<span class="fl">6.9</span><span class="op">)</span>, </span>
<span>  Species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"missouriensis"</span>,<span class="st">"missouriensis"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/add_records.html">add_records</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, <span class="va">records</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 151 152</span></span></code></pre>
<p>This function returns an integer vector containing the
<code>id</code>s of the new rows, if the save was successful (only the
first 500 ids are returned).</p>
<p>To <strong>edit</strong> rows in a table, use the
<code>update_records</code> function. The submitted data.frame must
contain a column named <code>id</code> to target the rows to be updated.
The structure must be contained by the structure of the destination
table.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Sepal_Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.1</span>,<span class="fl">5.0</span><span class="op">)</span>, </span>
<span>  Sepal_Width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.5</span>,<span class="fl">3.1</span><span class="op">)</span>, </span>
<span>  Petal_Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>,<span class="fl">1.4</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/update_records.html">update_records</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, <span class="va">records</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>This function returns TRUE if the recording was successful.</p>
<p>To <strong>delete</strong> rows from a table, use the
<code>delete_records</code> function. A vector of integers containing
the <code>id</code>s of the rows to be deleted is submitted.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/delete_records.html">delete_records</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>This function returns TRUE if the deletion was successful.</p>
</div>
<div class="section level3">
<h3 id="replace-or-synchronize-the-table">Replace or synchronize the table<a class="anchor" aria-label="anchor" href="#replace-or-synchronize-the-table"></a>
</h3>
<p>To <strong>replace</strong> all the data in a table, you must, as
when creating the table, use the <code>add_records</code> function with
the <code>create_or_replace=TRUE</code> option. In this case, you delete
and recreate a new table with the same identifier, so you can modify the
structure. Be careful, in the case of a table replacement you lose any
filters, styles or relationships saved from the Grist interface for this
table (you may need to prioritize deleting the entire ID sequence and
then simply adding all the rows).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oldiris</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch_table.html">fetch_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span>select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">newiris</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>my_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">oldiris</span><span class="op">)</span>, <span class="va">oldiris</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/add_records.html">add_records</a></span><span class="op">(</span><span class="va">api</span>,</span>
<span>  table_id <span class="op">=</span> <span class="st">"Iris"</span>,</span>
<span>  record_dicts <span class="op">=</span> <span class="va">newiris</span>,</span>
<span>  create_or_replace <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18</span></span>
<span><span class="co">##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36</span></span>
<span><span class="co">##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54</span></span>
<span><span class="co">##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72</span></span>
<span><span class="co">##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90</span></span>
<span><span class="co">##  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108</span></span>
<span><span class="co">## [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126</span></span>
<span><span class="co">## [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144</span></span>
<span><span class="co">## [145] 145 146 147 148 149 150</span></span></code></pre>
<p>The Grist API provides a synchronization method that, based on a
unique key, either adds the entry or updates the existing one. Thus, to
<strong>synchronize</strong> a data frame to a table, we use the
<code>sync_table</code> function. The submitted data frame must not
contain a column named <code>id</code> and its structure must be
identical to that of the destination table. The unique key can be on one
or more fields.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fetch_table.html">fetch_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, filters <span class="op">=</span> <span class="st">'filter={"Species": ["missouriensis"]}'</span><span class="op">)</span></span>
<span><span class="va">new_data</span><span class="op">$</span><span class="va">Species</span> <span class="op">&lt;-</span> <span class="st">"japonica"</span></span>
<span><span class="va">new_data</span><span class="op">$</span><span class="va">my_id</span><span class="op">[</span><span class="va">new_data</span><span class="op">$</span><span class="va">my_id</span> <span class="op">==</span> <span class="fl">150</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">151</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="va">new_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span>select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">new_data</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">##   my_id Sepal_Length Sepal_Width Petal_Length Petal_Width Species </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   149          6.5         2.9          3.5         7.4 japonica</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>   151          6.2         3.3          3.1         6.9 japonica</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sync_table.html">sync_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span>, <span class="va">new_data</span>, key_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"my_id"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="../reference/fetch_table.html">fetch_table</a></span><span class="op">(</span><span class="va">api</span>, <span class="st">"Iris"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">##      id my_id Sepal_Length Sepal_Width Petal_Length Petal_Width Species      </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   146   146          6.5         3            5.2         2   virginica    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>   147   147          6.2         3.4          5.4         2.3 virginica    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>   148   148          5.9         3            5.1         1.8 virginica    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>   149   149          6.5         2.9          3.5         7.4 japonica     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>   150   150          6.2         3.3          3.1         6.9 missouriensis</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>   151   151          6.2         3.3          3.1         6.9 japonica</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="advanced-use">Advanced use<a class="anchor" aria-label="anchor" href="#advanced-use"></a>
</h2>
<p>It is possible to customize your exploration queries in tables using
the <code>sql</code> endpoint and the <code>call</code> method of
gristapi.</p>
<p>Examples :</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">req_sql</span> <span class="op">&lt;-</span> <span class="st">"select * from Iris where Sepal_Length &gt; 5 and Sepal_Width &lt; 4"</span></span>
<span></span>
<span><span class="va">api</span><span class="op">$</span><span class="fu">json_to_table</span><span class="op">(</span></span>
<span>  <span class="va">api</span><span class="op">$</span><span class="fu">call</span><span class="op">(</span></span>
<span>    url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"/sql?q="</span>,<span class="fu"><a href="https://rdrr.io/r/utils/URLencode.html" class="external-link">URLencode</a></span><span class="op">(</span><span class="va">req_sql</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    type_resp <span class="op">=</span> <span class="st">"string"</span></span>
<span>  <span class="op">)</span>, </span>
<span>  <span class="st">"records"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 117 × 8</span></span></span>
<span><span class="co">##       id manualSort my_id Sepal_Length Sepal_Width Petal_Length Petal_Width</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1          1     1          5.1         3.5          1.5         0.2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     4          4     4          5.4         3.9          1.7         0.4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     9          9     9          5.4         3.7          1.5         0.2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>    15         15    15          5.4         3.9          1.3         0.4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>    16         16    16          5.1         3.5          1.4         0.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>    17         17    17          5.7         3.8          1.7         0.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>    18         18    18          5.1         3.8          1.5         0.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>    19         19    19          5.4         3.4          1.7         0.2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>    20         20    20          5.1         3.7          1.5         0.4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>    22         22    22          5.1         3.3          1.7         0.5</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 107 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: Species &lt;chr&gt;</span></span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Edouard Morin, Juliette ENGELAERE-LEFEBVRE.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
